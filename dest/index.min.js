!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).core={})}(this,(function(t){"use strict";function e(t,e){return t[0]=(4278190080&e)>>24,t[1]=(16711680&e)>>16,t[2]=(65280&e)>>8,t[3]=255&e,t}const r=new Uint8Array(1),n=new Uint8Array(4);class s{writeByte(t){return r[0]=t,this.write(r)}writeInteger(t){return this.write(e(n,t))}}class i extends s{constructor(){super(...arguments),this.hash=0}finish(){return this.hash}write(t){let e=this.hash;for(let r=0,n=t.length;r<n;r++)e=31*e+t[r];var r;return this.hash=(r=e)>>>1&1073741824|3221225471&r,this}}function o(){return new i}const u=new Set;function h(t,e){return a(t,e),u.clear(),e}function a(t,e){return null==t||u.has(t)||(u.add(t),"string"==typeof t?p(t,e):"number"==typeof t?function(t,e){e.writeInteger(t)}(t,e):"boolean"==typeof t?function(t,e){e.writeInteger(!0===t?1:0)}(t,e):"symbol"==typeof t?function(t,e){p(t.toString(),e)}(t,e):"function"==typeof t[Symbol.iterator]?function(t,e){for(const r of t)a(r,e)}(t,e):"number"==typeof t.length?function(t,e){for(let r=0,n=t.length;r<n;r++)a(t[r],e)}(t,e):function(t,e){for(const r in t)t.hasOwnProperty(r)&&(p(r,e),a(t[r],e))}(t,e)),e}function p(t,e){for(const r of t)e.writeInteger(r.charCodeAt(0))}function c(t){return null!=t&&"function"==typeof t.toJS?t.toJS():t}function l(t){return null!=t&&"function"==typeof t.toJSON?t.toJSON():t}const f={},d={};class _{constructor(t,e){if(t!==f)throw new TypeError("Options can only be created with the some or none functions");this._value=e}static some(t){return x(t)}static none(){return w()}static from(t){return null!=t?x(t):w()}static fromResult(t){return t.isOk()?x(t.unwrap()):w()}isNone(){return this._value===d}isSome(){return!this.isNone()}expect(t){if(this.isSome())return this._value;throw new Error("function"==typeof t?t():t)}unwrap(){return this.expect("Tried to unwrap value of none Option")}unwrapOr(t){return this.isSome()?this._value:t}unwrapOrElse(t){return this.isSome()?this._value:t()}map(t){return this.isSome()?x(t(this._value)):w()}mapOr(t,e){return this.isSome()?x(t(this._value)):x(e)}mapOrElse(t,e){return this.isSome()?x(t(this._value)):x(e())}flatMap(t){return this.isSome()?t(this._value):w()}flatMapOr(t,e){return this.isSome()?t(this._value):e}flatMapOrElse(t,e){return this.isSome()?t(this._value):e()}and(t){return this.isSome()?t:w()}andThen(t){return this.isSome()?t(this._value):w()}or(t){return this.isNone()?t:this}orElse(t){return this.isNone()?t():this}xor(t){const e=this.isSome(),r=t.isSome();return e&&!r?this:!e&&r?t:w()}filter(t){return this.isSome()&&t(this._value)?this:w()}getOrInsert(t){return this.isNone()&&(this._value=t),this}getOrInsertWith(t){return this.isNone()&&(this._value=t()),this}take(){if(this.isSome()){const t=this._value;return this._value=d,x(t)}return w()}from(t){return null!=t?this._value=t:this.clear(),this}replace(t){return this._value=t,this}clear(){return this._value=d,this}fromResult(t){return t.isOk()?x(t.unwrap()):w()}ifSome(t,e){return this.isSome()?t(this._value):e&&e(),this}ifNone(t,e){return this.isNone()?t():e&&e(this._value),this}fromJSON(t){return _.from(t)}toJSON(){return this.map(l).unwrapOr(null)}toJS(){return this.map(c).unwrapOr(null)}}const x=t=>new _(f,t),w=()=>new _(f,d);class k{constructor(t){this._index=0,this._iter=t}[Symbol.iterator](){return this}iter(){return this}next(){return this._iter.next()}nextWithIndex(){const t=this._iter.next();return t.done?t:{value:[t.value,this._index++]}}enumerate(){}peekable(){}forEach(t){}map(t){}merge(t){}concat(t){return this.merge(t)}filter(t){}step(t){}skip(t){}take(t){}toMap(t,e){}count(){return this.reduce(0,(t=>t+1))}consume(){let t=this.next();for(;!t.done;)t=this.next();return this}toArray(){return this.reduce([],((t,e)=>(t.push(e),t)))}join(t){return this.toArray().join(t)}indexOf(t){let e=this.next(),r=0;for(;!e.done;){if(e.value===t)return r;r++,e=this.next()}return-1}findIndex(t){let e=this.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(t(r,n))return n;e=this.nextWithIndex()}return-1}find(t){let e=this.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(t(r,n))return x(r);e=this.nextWithIndex()}return w()}findAll(t){return this.filter(t)}nth(t=0){let e=this.next();for(t<0&&(t=0);!e.done;){if(t--<=0)return x(e.value);e=this.next()}return w()}first(){return this.nth(0)}last(){let t=this.next();for(;!t.done;){const e=this.next();if(e.done)return x(t.value);t=e}return w()}any(t){return-1!==this.findIndex(t)}some(t){return this.any(t)}none(t){return-1===this.findIndex(t)}all(t){let e=this.nextWithIndex();for(;!e.done;){const[r,n]=e.value;if(!t(r,n))return!1;e=this.nextWithIndex()}return!0}unflatten(t){}reduce(t,e){let r=this.next();for(;!r.done;){t=e(t,r.value,this._index-1),r=this.next()}return t}reverse(){return m(this.toArray().reverse())}}function m(t){return null!=t?"function"==typeof t[Symbol.iterator]?new k(t[Symbol.iterator]()):"function"==typeof t.next?t instanceof k?t:new k(t):m("object"==typeof t?Object.entries(t):[t]):m([])}class v extends k{constructor(t){super(t)}next(){const t=super.nextWithIndex();return t.done?t:{value:O(t.value)}}}function O(t){const e=t[0],r=t;return r[0]=t[1],r[1]=e,r}k.prototype.enumerate=function(){return new v(this)};class y extends k{constructor(t,e){super(t),this._fn=e}next(){let t=super.nextWithIndex();for(;!t.done;){const[e,r]=t.value;if(this._fn(e,r))return{done:!1,value:e};t=super.nextWithIndex()}return{done:!0,value:void 0}}}k.prototype.filter=function(t){return new y(this,t)};class E extends k{constructor(t,e){super(t),this._fn=([t,r])=>(e(t,r),t)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}k.prototype.forEach=function(t){return new E(this,t)};class S extends k{constructor(t,e){super(t),this._fn=([t,r])=>e(t,r)}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._fn(t.value)}}}k.prototype.map=function(t){return new S(this,t)};class g extends k{constructor(t,e){super(t),this._other=e}next(){const t=super.next();return t.done?this._other.next():t}}k.prototype.merge=function(t){return new g(this,t)};class I extends k{constructor(){super(...arguments),this.peeked=[]}unpeekAll(){return this.peeked.length=0,this}unpeek(){return this.peeked.length>0?x(this.peeked.shift()):w()}peek(t=0){if(t<this.peeked.length)return x(this.peeked[t]);{let e=this.peeked.length-t-1,r=super.next();for(;!(r.done||(this.peeked.push(r.value),--e<=0));)r=super.next();return r.done?w():x(r.value)}}next(){const t=this.unpeek();if(t.isSome())return{done:!1,value:t.unwrap()};const e=super.next();return e.done?e:{done:!1,value:e.value}}}k.prototype.peekable=function(){return new I(this)};class b extends k{constructor(t,e){super(t),this._skipped=0,this._skip=0|(e<=0?0:e)}next(){let t=super.next();for(;!t.done;){if(!(this._skipped<=this._skip))return t;this._skipped+=1,t=super.next()}return{done:!0,value:void 0}}}k.prototype.skip=function(t){return new b(this,t)};class R extends k{constructor(t,e){super(t),this._stepped=0,this._step=e<=0?1:0|e}next(){let t=super.next();for(;!t.done;){if(!(this._stepped<this._step))return this._stepped=0,t;this._stepped+=1,t=super.next()}return{done:!0,value:void 0}}}k.prototype.step=function(t){return new R(this,t)};class M extends k{constructor(t,e){super(t),this._taken=0,this._count=0|(e<=0?0:e)}next(){return this._taken<this._count?(this._taken+=1,super.next()):{done:!0,value:void 0}}}k.prototype.take=function(t){return new M(this,t)};const N=t=>t,T=t=>t;class W extends k{constructor(t,e=N,r=T){super(t),this._map=([t,n])=>[e(t,n),r(t,n)]}toObject(){return this.reduce({},((t,e)=>(t[e[0]]=e[1],t)))}next(){const t=super.nextWithIndex();return t.done?t:{done:!1,value:this._map(t.value)}}}k.prototype.toMap=function(t,e){return new W(this,t,e)};class F extends k{constructor(t,e){super(t),this._fn=e}next(){return this._fn(this._iter)}}var J;k.prototype.unflatten=function(t){return new F(this,t)},t.RangeDirection=void 0,(J=t.RangeDirection||(t.RangeDirection={}))[J.Forward=0]="Forward",J[J.Backward=1]="Backward";class D{constructor(e,r,n=1){this.start=e,this.end=r,this.step=Math.abs(n),this.direction=e>r?t.RangeDirection.Backward:t.RangeDirection.Forward}static from(t,e,r=1){return new D(t,e,r)}getStart(){return this.start}getEnd(){return this.end}getStep(){return this.step}getDirection(){return this.direction}contains(t){return this.start<=t&&t<=this.end}isEmpty(){return this.direction===t.RangeDirection.Forward?this.start>this.end:this.start<this.end}iter(){return new k(this)}[Symbol.iterator](){return this}next(){if(this.isEmpty())return{done:!0,value:void 0};{const e=this.start;return this.direction===t.RangeDirection.Forward?this.start+=this.step:this.start-=this.step,{done:!1,value:e}}}}const j=D.from;class A extends D{static from(e,r=t.RangeDirection.Forward,n=1){return new A(e,r,n)}constructor(e,r=t.RangeDirection.Forward,n=1){r===t.RangeDirection.Forward?super(e,1/0,n):super(e,-1/0,n)}}const B=A.from,H={},P={};class U{constructor(t,e,r){if(t!==H)throw new TypeError("Results can only be created with the ok or err functions");this._ok=e,this._err=r}static ok(t){return C(t)}static err(t){return q(t)}static fromOption(t,e="Tried to create Result from none Option"){return t.isSome()?C(t.unwrap()):q(new Error(e))}isErr(){return this._err!==P}isOk(){return this._ok!==P}expect(){if(this.isOk())return this._ok;throw this._err}unwrap(){return this.expect()}unwrapOr(t){return this.isOk()?this._ok:t}unwrapOrElse(t){return this.isOk()?this._ok:t(this._err)}map(t){return this.isOk()?C(t(this._ok)):q(this._err)}mapOr(t,e){return this.isOk()?C(t(this._ok)):C(e)}mapOrElse(t,e){return this.isOk()?C(t(this._ok)):C(e(this._err))}flatMap(t){return this.isOk()?t(this._ok):q(this._err)}flatMapOr(t,e){return this.isOk()?t(this._ok):e}flatMapOrElse(t,e){return this.isOk()?t(this._ok):e(this._err)}expectErr(t){if(this.isErr())return this._err;throw new Error("function"==typeof t?t():t)}unwrapErr(){return this.expectErr("Tried to unwrap error value of ok Result")}unwrapErrOr(t){return this.isErr()?this._err:t}unwrapErrOrElse(t){return this.isErr()?this._err:t(this._ok)}mapErr(t){return this.isErr()?q(t(this._err)):C(this._ok)}mapErrOr(t,e){return this.isErr()?q(t(this._err)):q(e)}mapErrOrElse(t,e){return this.isErr()?q(t(this._err)):q(e(this._ok))}flatMapErr(t){return this.isErr()?t(this._err):C(this._ok)}flatMapErrOr(t,e){return this.isErr()?t(this._err):e}flatMapErrOrElse(t,e){return this.isErr()?t(this._err):e(this._ok)}and(t){return this.isOk()?t:q(this._err)}andThen(t){return this.isOk()?t(this._ok):q(this._err)}or(t){return this.isErr()?t:this}orElse(t){return this.isErr()?t(this._err):this}ifOk(t,e){return this.isOk()?t(this._ok):e&&e(this._err),this}ifErr(t,e){return this.isErr()?t(this._err):e&&e(this._ok),this}fromJSON(t){if(t){if(t.ok)return C(t.ok);if(t.err)return q(t.err)}throw new TypeError("Invalid json for Result")}toJSON(){return this.isOk()?{ok:this.map(l).unwrap()}:{err:this.mapErr(l).unwrapErr()}}toJS(){return this.isOk()?{ok:this.map(c).unwrap()}:{err:this.mapErr(c).unwrapErr()}}}const C=t=>new U(H,t,P),q=t=>new U(H,P,t);t.Enumerate=v,t.FastHasher=i,t.Filter=y,t.ForEach=E,t.Hasher=s,t.Iter=k,t.Map=S,t.Merge=g,t.Option=_,t.Peekable=I,t.Range=D,t.RangeFrom=A,t.Result=U,t.Skip=b,t.Step=R,t.Take=M,t.ToMap=W,t.Unflatten=F,t.bytesToInteger=function(t){return t[3]|t[2]<<8|t[1]<<16|t[0]<<24},t.defaultHasher=o,t.err=q,t.hash=h,t.hashOf=function(t,e=o){return h(t,e()).finish()},t.integerToBytes=e,t.iter=m,t.none=w,t.ok=C,t.range=j,t.rangeFrom=B,t.some=x,t.toJS=c,t.toJSON=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.min.js.map
